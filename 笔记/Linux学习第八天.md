
##  Linux实操篇 —— 组管理和权限管理  ## 重要

  # Linux组基本介绍 
    
   在Linux中的每个用户必须属于一个组，不能独立于组外。在Linux中每个文件都有所有者、所在组、其他组的概念


  # 文件/ 目录 所有者

   一般为文件的创建者，谁创建了文件，就自然的成为该文件的所有者。

   * 查看文件的所有者
      -----> 指令：ls -ahl
   * 应用案例
     修改文件所有者
     -----> 指令：chown 用户名 文件名
   * 应用案例
    要求：使用root创建一个文件apple.txt，然后将其所有者修改成tom
     ------>指令：chown tom apple.txt

  # 所在组 #
       
    当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组

    * 查看文件/目录所在组
       指令：ls -ahl
    
    * 修改文件所在的组
       指令：chgrp 组名 文件名
    * 应用实例
      案例：使用root用户创建文件orange.txt,看看当前这个文件属于哪个组，然后将这个文件所在组，修改到fruit组 
       指令：groupadd fruit
            touch orange.txt
            ls -ahl
            chgrp fruit orange.txt

 # 所在组 #
  
    除文件的所有者和所在组的用户外，系统的其他用户都是文件的其他组
    *  改变用户所在组
     在添加用户时，可以指定将该用户添加到哪个组，同样的用root的管理权限可以改变某个用户所在的组。
    * 基本语法     
      1.   usermod -g 组名 用户名
      2.   usermod -d 目录名 用户名 改变该用户登录的初始目录
    * 应用实例
      案例：将zwj这个用户从原来所在的组，修改到wudang组。 

 # 权限 #

    ls -l中显示的内容如下
    drwx------. 3 king king 4096 2月  23 21:57 test
   
    0-9位说明
      
	1. 第0位确定文件类型（d，-，l，c，b）
	    l是链接，相当于Windows的快捷方式
        d是目录，相当于Windows的文件夹
        c是字符设备文件，鼠标，键盘
        b是块设备，比如硬盘
    2. 第1-3位确定所有者（该文件的所有者）拥有该文件的权限。--User
    3.  第4-6位确定所属组（同用户组的）拥有该文件的权限。--Group
    4.   第7-9位确定其他用户拥有该文件的权限。--Other

 # rwx权限 # 难点
 
    * rwx作用到文件
	1. 【r】代表可读（read）：可以读取，查看
	2. 【w】代表可写（write）：可以修改，但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所有的目录有写权限，才能删除该文件
	3. 【x】代表可执行（execute）：可以被执行
	
    * rwx作用到目录
	1. 【r】代表可读（read）：可以读取，ls查看内容
	2. 【w】代表可写（write）：可以修改，对目录内创建+删除+重命名目录
	3. 【x】代表可执行（execute）：可以进入该目录

   # 实际案例 #

     ls -l中显示的内容如下：
       -rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc
      
		1 .第一个字符代表文件类型： - d c b
        2 . 其余字符每三个一组（rwx)读r 写w 执行x
        3 .第一组rwx：文件拥有者的权限是读、写和执行
        4 .第二组rw-：与文件拥有者同一组的用户的权限是读、写但不能执行
        5 .第三组r--：不与文件拥有者同组的其他用户的权限是读不能写和执行


        可用数字的表示为：r=4，w=2，x=1因此rwx=4+2+1=7
        其他说明
          1        文件：硬链接数 或 目录：子目录数
          root     用户
          root     组
          1213     文件大小（字节），如果是文件夹则显示4096字节
          Feb 2 09:39 最后修改时间
          abc      文件名
  
 # 修改权限-chmod #
   
    基本说明：通过chmod指令，可以修改文件或者目录的权限。

    * 第一种方式：+、-、=变更权限
       u:所有者   g：所有组  o:其他人 a:所有人（u，g，o的总和）     
       1. chmod u=rwx,g=rx,o=x 文件/目录名
       2. chmod o+w 文件/目录名
       3. chmod a-x 文件/目录名
    * 案例演示
		1.给abc文件的所有者读写执行的权限，给所在组读执行权限，给其他组读执行权限
		  指令：chmod u=rwx,g=rx,o=rx abc
        2.给abc文件的所有者去除执行的权限，增加组写的权限
          指令：chmod u-x,g+w abc
        3.给abc文件的所有用户添加读的权限 
		  指令：chmod a+r abc
    * 第二种方式：通过数字变更权限
      r=4,w=2,x=1    rwx=4+2+1=7
      chmod u=rwx,g=rx,o=x 文件目录名  相当于chmod 751 文件目录名
    * 案例演示
      案例：要求将/home/abc.txt文件的权限修改成 rwxr-xr-x 
        chmod 755 /home/abc.txt

 # 修改文件所有者-chown #
   
	* 基本语法
	 chown newowner 文件/目录 功能：改变所有者
     chown newowner：newgroup 文件/目录 功能：改变所有者和所在组
    * -R 如果是目录 则使其下所有子文件或目录递归生效

    * 案例演示
      案例1：请将/home/abc.txt文件的所有者修改成tom
       指令：chown tom /home/abc.txt
      案例2：请将/home/test目录下所有的文件和目录的所有者都修改成tom
       指令：chown -R tom /home/test

 # 修改文件/目录所在组-chgrp #
   
    * 基本语法
      chgrp newgroup 文件/目录 功能：改变所有组
    * 案例演示
     案例1：请将/home/abc.txt文件的所有组修改成shaolin
       指令：chgrp shaolin /home/abc.txt
     anli2：请将/home/test目录下所有的文件和目录的所有组都修改成shaolin
       指令：chgrp -R shaolin /home/test